<!DOCTYPE html>
<html lang="en">
<style>
  .grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 12px;
  }
  .cell {
    aspect-ratio: 1 / 1;
    background: #eaeaea;
    border-radius: 12px;
    padding: 12px;
  }
</style>
<head>
    <meta charset="UTF-8">
    <title>拾日 · 三十六格之年</title>
</head>

<body>
    <div class = "grid" id ="grid"></div>

    <div class="footer">
        点击格子 · 完成 +1
    </div>
</body>


<script>
    // 最简单的起步：先手动渲染6个格子，看看样式对不对
  const grid = document.getElementById('grid');
    // 先清空
  grid.innerHTML = '';

  //读取存储的进度

  let progressList = []
  const saved = localStorage.getItem('saved_shiri_progress');
  if (saved) {
      progressList = JSON.parse(saved);//数组，长度36

  }
  else{
    //如果没有存储过，初始值为0
      progressList = new Array(36).fill(0);
  }
    // 生成36个格子，数据写死

  for (let i = 0; i < 36; i++) {
    const cell = document.createElement('div');
    cell.className = 'cell';
    //给每个格子增加一个序号，以方便点击时用来辨别点的是第几个格子
    cell.setAttribute('data_index', i);

      // 格子内部结构
    cell.innerHTML = `
      <span>${i+1}/36</span>
      <span class="cell-progress">${progressList[i]}/10</span>
    `;

    cell.onclick = function() {
        //alert('格子被点了！');

        let index = parseInt(this.getAttribute('data_index'));

        if (progressList[index] < 10 ){
            progressList[index]++;
        }

        //更新界面的显示
        this.querySelector('.cell-progress').innerHTML = progressList[index] + '/10';


        //存储
        localStorage.setItem('saved_shiri_progress', JSON.stringify(progressList));

        /*// 1. 找到这个格子右下角的数字
        let progressSpan = this.querySelector('.cell-progress');

        // 2. 取出当前数字（比如 "3/10"），只取 "/" 前面的部分
        let current = progressSpan.innerText.split('/')[0];
        current = parseInt(current);  // 变成数字，比如 3

        // 3. 如果还没到 10，就 +1
        if (current < 10) {
            current = current + 1
        }

        // 4. 把新数字写回去
        progressSpan.innerText = current + '/10';
        */
    }
    grid.appendChild(cell);
  }
</script>
</html>